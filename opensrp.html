<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Ona projects</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0;}
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
  .popup-title { color:#E05939; font-size:1.2em; font-weight:bold; margin-bottom: 2px; }
  .popup-product { color: #212121; margin-top: 6px;}
  .popup-description { color:#212121; }
  .popup-meta { color:#212121; font-size:.9em; text-transform: uppercase; margin-bottom: 6px; letter-spacing: .5px;
  }
  .popup-product a { text-decoration: none; color:#212121;
  }
  .popup-product a:hover { text-decoration: underline;
}
</style>
</head>
<body>
<style>
.mapboxgl-popup {
max-width: 400px;
font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
</style>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1Ijoib25hIiwiYSI6IlVYbkdyclkifQ.0Bz-QOOXZZK01dq4MuMImQ';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/ona/ckhe1gi5408zw19o1paqnmb7e',
    center: [55, -1.5],
    zoom: 1.9
  });

  map.scrollZoom.disable();

  map.addControl(new mapboxgl.NavigationControl());

  map.on('load', function () {
    map.addSource('places', {
      'type': 'geojson',
      'data': {
        'type': 'FeatureCollection',
        'features': [
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Community Health Worker App</div><div class="popup-meta">Liberia &#xb7; Last Mile Health</div><div class="popup-description">An offline-focused OpenSRP implementation that equips CHWs to improve health outcomes in the hardes-to-reach villages.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [-7.716625530707781, 5.851205406393821]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Afya-Tek</div><div class="popup-meta">Tanzania &#xb7; D-Tree International</div><div class="popup-description">Multiuser OpenSRP implementation connecting community health workers, health facility workers, and accredited drug dispensing outlets.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [37.314135347346514, -5.960034821827448]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Reveal Malaria</div><div class="popup-meta">Thailand &#xb7; Chai, Akros</div><div class="popup-description">Spatial intelligence platform that guides and tracks in field indoor residual spraying, mass drug administration, and foci investigations.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [101.51896219533845, 16.12588281373993]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Reveal Malaria</div><div class="popup-meta">Namibia &#xb7; Chai, Akros</div><div class="popup-description">Spatial intelligence platform that guides and tracks in field indoor residual spraying, mass drug administration, and foci investigations.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [16.90363810013244, -22.671444414558763]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Reveal Malaria</div><div class="popup-meta">Zambia &#xb7; Chai, Akros</div><div class="popup-description">Spatial intelligence platform that guides and tracks in field indoor residual spraying, mass drug administration, and foci investigations.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [28.24640383522207, -14.912695294976036]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">RDT Open Guidelines</div><div class="popup-meta">Kenya &#xb7; Gates Foundation</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [37.33209713872077, 1.0548793141219774]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Malawi HIS eRegister</div><div class="popup-meta">Malawi &#xb7; GIZ</div><<div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [33.77569755603585, -13.965188456014346]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">People on the Move prototype</div><div class="popup-meta">Greece &#xb7; Médecins Sans Frontières</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [23.758449384404983, 37.98144447846284]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Zambia Electronic Immunization Register</div><div class="popup-meta">Zambia &#xb7; PATH</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [25.85520676955377, -17.853406016996825]
          }
        },

        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">End TB app</div><div class="popup-meta">Pakistan &#xb7; IRD</div><<div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [67.05882043621388, 24.84607773115707]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Digital Immunizations app</div><div class="popup-meta">Tunisia &#xb7; UNICEF Tunisia</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [10.239395504980154, 36.835342471726136]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Mobile Integrated Early Childhood Development tool</div><div class="popup-meta">Vietnam &#xb7; UNICEF Vietnam</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [105.81607558208249, 21.031438329453753]
          }
        },

          {
            'type': 'Feature',
            'properties': {
              'description':
              '<div class="popup-title">Child Friendly Communities</div><div class="popup-meta">West and Central Africa &#xb7; UNICEF</div><div class="popup-description">Communitiy platform across five countries for reducing child and maternal mortality.</div><div class="popup-product">Product: <a href="#">OpenSRP Enterprise</a></div>',
              'icon': 'tw-provincial-expy-2'
            },
            'geometry': {
              'type': 'Point',
              'coordinates': [-17.520735215342867, 14.744597697865371]
            }
          }
        ]
      }
    });

    // Add a layer showing the places.
    map.addLayer({
      'id': 'places',
      'type': 'symbol',
      'source': 'places',
      'layout': {
        'icon-image': '{icon}',
        'icon-allow-overlap': true
      }
    });

    // When a click event occurs on a feature in the places layer, open a popup at the
    // location of the feature, with description HTML from its properties.
    map.on('click', 'places', function (e) {
      var coordinates = e.features[0].geometry.coordinates.slice();
      var description = e.features[0].properties.description;

    // Ensure that if the map is zoomed out such that multiple
    // copies of the feature are visible, the popup appears
    // over the copy being pointed to.
    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
    }

    new mapboxgl.Popup()
    .setLngLat(coordinates)
    .setHTML(description)
    .addTo(map);
    });

    // Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'places', function () {
      map.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'places', function () {
      map.getCanvas().style.cursor = '';
    });

});
</script>

<!-- https://developers.google.com/public-data/docs/canonical/countries_csv -->

</body>
</html>
