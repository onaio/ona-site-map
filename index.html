<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Ona projects</title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
<script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
<link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
<style>
	body { margin: 0; padding: 0;}
	#map { position: absolute; top: 0; bottom: 0; width: 100%; }
  .popup-title { color:#E05939; font-size:1.2em; font-weight:bold; margin-bottom: 6px; }
  .mapboxgl-popup {
    font-family: 'Mulish','Adamina','Helvetica Neue',Helvetica,Roboto,Arial,sans-serif !important;
  }
  .popup-meta { color: #666666; }
  .popup-description { color:#212121; }
  .popup-product { color:#E05939; font-size:.8em; text-transform: uppercase; margin-top: 6px; letter-spacing: .5px;
  }
  .popup-product a { text-decoration: none; color:#E05939;
  }
  .popup-product a:hover { text-decoration: underline;
}
</style>
</head>
<body>
<style>
.mapboxgl-popup {
max-width: 400px;
font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
</style>
<div id="map"></div>
<script>
	mapboxgl.accessToken = 'pk.eyJ1Ijoib25hIiwiYSI6IlVYbkdyclkifQ.0Bz-QOOXZZK01dq4MuMImQ';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/ona/ckhe1gi5408zw19o1paqnmb7e',
    center: [46, 6],
    zoom: 2.3
  });

  map.scrollZoom.disable();

  map.addControl(new mapboxgl.NavigationControl());

  map.on('load', function () {
    map.addSource('places', {
      'type': 'geojson',
      'data': {
        'type': 'FeatureCollection',
        'features': [
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<div class="popup-title">Humanitarian Performance Monitoring Dashboard</div><div class="popup-meta">Fiji &#xb7; UNICEF Pacific</div><div class="popup-description">Data management for emergencies and education</div><div class="popup-product">&#x203A; <a href="#">Canopy Analytics</a></div>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [178.065033, -17.71337]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<strong>Cambodia</strong><p><a href="https://ona.io" target="_blank" title="Opens in a new window">Link</a> blah blah blah</p>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [104.9806, 11.9880]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<strong>Ona Rules!!!</strong><p><a href="https://ona.io" target="_blank" title="Opens in a new window">Link</a> blah blah blah</p>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [37.906193,-2.223559]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<strong>South Sudan</strong><p><a href="https://ona.io" target="_blank" title="Opens in a new window">Link</a> blah blah blah</p>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [9.537499, 33.886917]
          }
        },
        {
          'type': 'Feature',
          'properties': {
            'description':
            '<strong>DC</strong><p>blah blah blah</p>',
            'icon': 'tw-provincial-expy-2'
          },
          'geometry': {
            'type': 'Point',
            'coordinates': [-77.0364,38.8951]
          }
        },
          {
            'type': 'Feature',
            'properties': {
              'description':
              '<strong>Ona Rules!!!</strong><p><a href="https://ona.io" target="_blank" title="Opens in a new window">Link</a> blah blah blah</p>',
              'icon': 'tw-provincial-expy-2'
            },
            'geometry': {
              'type': 'Point',
              'coordinates': [8.675277,9.08199]
            }
          }
        ]
      }
    });

    // Add a layer showing the places.
    map.addLayer({
      'id': 'places',
      'type': 'symbol',
      'source': 'places',
      'layout': {
        'icon-image': '{icon}',
        'icon-allow-overlap': true
      }
    });

    // When a click event occurs on a feature in the places layer, open a popup at the
    // location of the feature, with description HTML from its properties.
    map.on('click', 'places', function (e) {
      var coordinates = e.features[0].geometry.coordinates.slice();
      var description = e.features[0].properties.description;

    // Ensure that if the map is zoomed out such that multiple
    // copies of the feature are visible, the popup appears
    // over the copy being pointed to.
    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
      coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
    }

    new mapboxgl.Popup()
    .setLngLat(coordinates)
    .setHTML(description)
    .addTo(map);
    });

    // Change the cursor to a pointer when the mouse is over the places layer.
    map.on('mouseenter', 'places', function () {
      map.getCanvas().style.cursor = 'pointer';
    });

    // Change it back to a pointer when it leaves.
    map.on('mouseleave', 'places', function () {
      map.getCanvas().style.cursor = '';
    });

});
</script>

<!-- https://developers.google.com/public-data/docs/canonical/countries_csv -->

</body>
</html>
